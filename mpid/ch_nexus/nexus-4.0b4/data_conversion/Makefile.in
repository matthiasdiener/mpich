#
# rcsid = $Header: /nfs/globus1/src/master/nexus_dc/Makefile.in,v 1.19 1997/01/21 23:00:10 tuecke Exp $
#
# This is inserted by configure
@makefile_header@

DC_INCLUDES= -I. -I$(srcdir)

DC_CFLAGS= $(DC_INCLUDES) $(ALL_CFLAGS) 

SHARED_LIB=$(build_dir_lib)/libnexus@nexus_flavor@.@SOEXT@
STATIC_LIB=$(build_dir_lib)/libnexus@nexus_flavor@.a

OBJS = \
        nexus_dc_@MY_FILE@.@OFILE@

HDRS = \
	nexus_dc.h

INSTALL_HDRS= \
	nexus_dc.h

all: objs build_dir_headers

force:

rel_to_build_dir=../data_conversion

print-shared-objs: force
	@ for obj in $(OBJS) ; do \
	    relobjs="$(rel_to_build_dir)/$$obj $$relobjs"; \
          done; \
          echo $$relobjs

print-static-objs:
	@ echo ""

build_dir_headers: build_dir_inc
	@ for hdr in $(INSTALL_HDRS) ; do \
           if [ -f $${hdr} ] ; then \
	     lnk_file=$(build_dir_inc)/`echo $${hdr} | ${SED} -e 's|.*/||'`; \
             if test ! \( -f $$lnk_file \) ; then \
                case "$${hdr}" in \
                   /* ) $(LN_S) $${hdr} $$lnk_file ;; \
                   ../* ) $(LN_S) $${hdr} $$lnk_file ;; \
                   * ) $(LN_S) $(rel_to_build_dir)/$${hdr} $$lnk_file ;; \
                esac ; \
	     fi; \
	  fi \
	done

build_dir_inc: force
	@if  test ! -d "${build_dir_inc}"; then \
	   mkdir ${build_dir_inc}; \
	fi

objs:	$(OBJS)

nexus_dc_@MY_FILE@.@OFILE@: $(srcdir)/nexus_dc_@MY_FILE@.c $(HDRS) 
	$(CC) $(CPPFLAGS) $(DC_CFLAGS) -c $(srcdir)/nexus_dc_@MY_FILE@.c


test_put: $(srcdir)/test_put.c
	$(CC) -O -o test_put $(srcdir)/test_get.c

test_get: $(srcdir)/test_get.c
	$(CC) -O -o test_get $(srcdir)/test_get.c

compare: $(srcdir)/compare.c
	$(CC) -O -o compare $(srcdir)/compare.c

generate: $(srcdir)/generate.c
	$(CC) -O -o generate $(srcdir)/generate.c

xdr_times: $(srcdir)/xdr_times.c
	$(CC) -O -o xdr_times $(srcdir)/xdr_times.c

#install: $(TARGETS)
#	$(INSTALL) $(INSTOWN) $(INSTGRP) $(INSTMOD) -s $? $(INSTDIR)
#	$(RM) *.o

install:

install.man:
	$(INSTALL) $(MANOWN) $(MANGRP) $(MANMOD) -c nexus_dc.1 $(MANDIR)/nexus_dc.$(MAN)

#	use these if you don't have an install command

#install: $(TARGETS)
#	mv $? $(INSTDIR) ; cd $(INSTDIR) ; strip $?
#	cd $(INSTDIR) ; \
#		$(CHOWN) $(INSTOWN) $(TARGETS) ; \
#		$(CHGRP) $(INSTGRP) $(TARGETS) ; \
#		$(CHMOD) $(INSTMOD) $(TARGETS) ; \
#		$(RM) *.o

#	cp $? $(MANDIR) ; cd $(MANDIR)/endian.$(MAN)
#	cd $(MANDIR) ; \
#		$(CHOWN) $(MANOWN) nexus_dc.$(MAN) ; \
#		$(CHGRP) $(MANGRP) nexus_dc.$(MAN) ; \
#		$(CHMOD) $(MANMOD) nexus_dc.$(MAN)

clean:
	for subdir in @SUBDIRS@; do \
	    if [ -d $$subdir -a -f $$subdir/Makefile ] ; then \
	        echo "making clean in $$subdir" ; \
	        (cd $$subdir && $(MAKE) clean) ; \
	    fi \
	done
	rm -f nexus_dc *.o

distclean: clean
	for subdir in @SUBDIRS@; do \
	    if [ -d $$subdir -a -f $$subdir/Makefile ] ; then \
	        echo "making distclean in $$subdir" ; \
	        (cd $$subdir && $(MAKE) distclean) ; \
	    fi \
	done
	rm -f config.* Makefile nexus_dc.h makefile_header stamp-h



ALL: default
##### User configurable options #####

ARCH        = @ARCH@
MAKE        = @MAKE@
COMM        = @COMM@
MPIR_HOME   = @MPIR_HOME@
CC          = @MPICC@
CLINKER     = $(CC)
F77         = @MPIF77@
FLINKER     = $(F77)
INCLUDE_DIR = -I@MPE_DIR@ @X_INC@
OPTFLAGS    = 
MPE_GRAPH   = @MPE_GRAPHICS@
MPE_LIBS    = @MPE_LIBS@ -lp@MPILIBNAME@
MPE_DIR     = @MPE_DIR@
LIB_PATH    = @X_LIB@
LIB_LIST    = 

### End User configurable options ###

PROFLIB =
CFLAGS  = @MPE_CFLAGS@ $(OPTFLAGS) $(MPE_GRAPH) $(INCLUDE_DIR)
LIBS = $(LIB_PATH) $(PROFLIB) $(LIB_LIST)
EXECS = pmandel

default: $(EXECS)

all: default

fract_gen.o: fract_gen.h pmandel.h

pm_genproc.o: pmandel.h fract_gen.h

pmandel.o: pmandel.h fract_gen.h lists.h pm_genproc.h

pm_separate_rect.o: pmandel.h pm_genproc.h

pmandel: pmandel.o pm_genproc.o fract_gen.o pm_separate_rect.o lists.o args.o
	$(CLINKER) $(OPTFLAGS) -o pmandel pmandel.o pm_genproc.o \
	  fract_gen.o pm_separate_rect.o lists.o args.o \
	  $(LIB_PATH) $(MPE_LIBS) $(LIB_LIST)

clean:
	/bin/rm -f *.o *~ PI* $(EXECS) *.log *.out

.c.o:
	$(CC) $(CFLAGS) -c $*.c
.f.o:
	$(F77) $(FFLAGS) -c $*.f

lint:
	lint -chv @USER_CFLAGS@ $(MPE_GRAPH) \
		$(INCLUDE_DIR) pmandel.c \
		pm_genproc.c fract_gen.c pm_separate_rect.c lists.c args.c
